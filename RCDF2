library(dplyr)
library(tidyr)

#senior_citizen_cout <- data$cbms_person_record |>
#  filter(a05_age >= 60)

#1


senior_citizens_count <- data$cbms_person_record |>
  mutate(
    area_code = paste0(
      region_code,
      province_code,
      city_mun_code,
      barangay_code
    ), .after = 1) |>
  filter(a05_age >= 60, b02_relation_to_nuclear_family_head == 0) |>
  group_by(area_code) |>
  summarize(senior_citizen_count = n())

View(senior_citizens_count)
glimpse(senior_citizens_count)

View(data$cbms_person_record)

#2
homeless <- data$cbms_household_record |>
  mutate(
    area_code = paste0(
      region_code,
      province_code,
      city_mun_code,
      barangay_code
    )) |>
  filter(o01_building_type == 8) |>
  group_by(area_code) |>
  summarise(homeless_count = n())

(homeless)


print(data$cbms_household_record , colnames(193)
      )
